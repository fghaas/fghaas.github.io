<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0"><channel><title>xahteiwi.eu - Galera</title><link>https://fghaas.github.io/</link><description></description><lastBuildDate>Tue, 04 Dec 2012 10:53:27 +0100</lastBuildDate><item><title>Adding MySQL/Galera resources to Pacemaker</title><link>https://fghaas.github.io/resources/hints-and-kinks/mysqlgalera-pacemaker-adding-mysqlgalera-resources-pacemaker/</link><description>&lt;p&gt;Once you have one instance of Galera running, and it is running on the
same node that holds the temporarily-configured cluster IP
(192.168.122.99 in our example), you can add your resources to the
Pacemaker cluster configuration.&lt;/p&gt;
&lt;p&gt;Create a temporary file, such as &lt;code&gt;/tmp/galera.crm&lt;/code&gt;, with the …&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Florian Haas</dc:creator><pubDate>Tue, 04 Dec 2012 10:53:27 +0100</pubDate><guid isPermaLink="false">tag:fghaas.github.io,2012-12-04:/resources/hints-and-kinks/mysqlgalera-pacemaker-adding-mysqlgalera-resources-pacemaker/</guid><category>hints-and-kinks</category><category>Galera</category><category>MySQL</category><category>Pacemaker</category></item><item><title>Bootstrapping the Galera cluster</title><link>https://fghaas.github.io/resources/hints-and-kinks/mysqlgalera-pacemaker-bootstrapping-galera-cluster/</link><description>&lt;p&gt;In order to bootstrap your Galera cluster, manually bring up the
cluster IP address on the desired interface. In this example, we'll
use 192.168.122.99 and eth1:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;ip address add &lt;span class="m"&gt;192&lt;/span&gt;.168.122.99/24 dev eth1 label eth1:galera
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;And initialize the Galera cluster:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;mysqld --wsrep_cluster_address&lt;span class="o"&gt;=&lt;/span&gt;gcomm …&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Florian Haas</dc:creator><pubDate>Tue, 04 Dec 2012 10:53:27 +0100</pubDate><guid isPermaLink="false">tag:fghaas.github.io,2012-12-04:/resources/hints-and-kinks/mysqlgalera-pacemaker-bootstrapping-galera-cluster/</guid><category>hints-and-kinks</category><category>Galera</category><category>MySQL</category><category>Pacemaker</category></item><item><title>Configuring Corosync</title><link>https://fghaas.github.io/resources/hints-and-kinks/mysqlgalera-pacemaker-configuring-corosync/</link><description>&lt;p&gt;You now need configure Corosync. The following example configuration
file assumes that your cluster nodes have two network interfaces,
using the 192.168.122.0/24 and 192.168.133.0/24 networks. You will
need to adjust this to your own network configuration.&lt;/p&gt;
&lt;p&gt;Set the contents of &lt;code&gt;/etc/corosync …&lt;/code&gt;&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Florian Haas</dc:creator><pubDate>Tue, 04 Dec 2012 10:53:27 +0100</pubDate><guid isPermaLink="false">tag:fghaas.github.io,2012-12-04:/resources/hints-and-kinks/mysqlgalera-pacemaker-configuring-corosync/</guid><category>hints-and-kinks</category><category>Galera</category><category>MySQL</category><category>Pacemaker</category></item><item><title>Dealing with node failure</title><link>https://fghaas.github.io/resources/hints-and-kinks/mysqlgalera-pacemaker-dealing-node-failure/</link><description>&lt;p&gt;If an entire node happens to get killed, and that node currently does
not hold the Galera IP (192.168.122.99 in our example), then the other
nodes simply continue to function normally, and you can connect to and
use them without interruption. In the example below, &lt;code&gt;alice&lt;/code&gt; has …&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Florian Haas</dc:creator><pubDate>Tue, 04 Dec 2012 10:53:27 +0100</pubDate><guid isPermaLink="false">tag:fghaas.github.io,2012-12-04:/resources/hints-and-kinks/mysqlgalera-pacemaker-dealing-node-failure/</guid><category>hints-and-kinks</category><category>Galera</category><category>MySQL</category><category>Pacemaker</category></item><item><title>MySQL/Galera in Pacemaker High Availability Clusters</title><link>https://fghaas.github.io/resources/hints-and-kinks/mysqlgalera-pacemaker-high-availability-clusters/</link><description>&lt;p&gt;In this walkthrough, you will create a Pacemaker managed MySQL/Galera
cluster. It assumes that you are running on a Debian 6.0 (squeeze)
box, but the concepts should be equally applicable to other platforms
with minimal modifications.&lt;/p&gt;
&lt;p&gt;It also assumes that your Galera cluster will consist of three nodes …&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Florian Haas</dc:creator><pubDate>Tue, 04 Dec 2012 10:53:27 +0100</pubDate><guid isPermaLink="false">tag:fghaas.github.io,2012-12-04:/resources/hints-and-kinks/mysqlgalera-pacemaker-high-availability-clusters/</guid><category>hints-and-kinks</category><category>Galera</category><category>MySQL</category><category>Pacemaker</category></item><item><title>Recovering from full cluster shutdown</title><link>https://fghaas.github.io/resources/hints-and-kinks/mysqlgalera-pacemaker-recovering-full-cluster-shutdown/</link><description>&lt;p&gt;If at any time &lt;em&gt;all&lt;/em&gt; of the nodes in your cluster have been taken
down, it is necessary to re-initialize the Galera replication
state. In effect, this is identical to bootstrapping the cluster.&lt;/p&gt;
&lt;p&gt;Start by manually bringing up the cluster IP on one of your nodes:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;ip address add &lt;span class="m"&gt;192 …&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Florian Haas</dc:creator><pubDate>Tue, 04 Dec 2012 10:53:27 +0100</pubDate><guid isPermaLink="false">tag:fghaas.github.io,2012-12-04:/resources/hints-and-kinks/mysqlgalera-pacemaker-recovering-full-cluster-shutdown/</guid><category>hints-and-kinks</category><category>Galera</category><category>MySQL</category><category>Pacemaker</category></item><item><title>Setting Galera-specific MySQL options</title><link>https://fghaas.github.io/resources/hints-and-kinks/mysqlgalera-pacemaker-setting-galera-specific-mysql-options/</link><description>&lt;p&gt;Now you can proceed with setting Galera specifics in your MySQL
configurations.&lt;/p&gt;
&lt;p&gt;Create a configuration file, &lt;strong&gt;identical on all cluster nodes,&lt;/strong&gt; named
&lt;code&gt;/etc/mysql/conf.d/galera.cnf&lt;/code&gt; with the following content:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;[mysqld]&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="na"&gt;bind_address&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;0.0.0.0&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="na"&gt;binlog_format&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;ROW&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="na"&gt;default_storage_engine&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;InnoDB&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="na"&gt;innodb_autoinc_lock_mode&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;2&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="na"&gt;innodb_locks_unsafe_for_binlog&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;1&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Create another configuration file …&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Florian Haas</dc:creator><pubDate>Tue, 04 Dec 2012 10:53:27 +0100</pubDate><guid isPermaLink="false">tag:fghaas.github.io,2012-12-04:/resources/hints-and-kinks/mysqlgalera-pacemaker-setting-galera-specific-mysql-options/</guid><category>hints-and-kinks</category><category>Galera</category><category>MySQL</category><category>Pacemaker</category></item><item><title>Starting Pacemaker</title><link>https://fghaas.github.io/resources/hints-and-kinks/mysqlgalera-pacemaker-starting-pacemaker/</link><description>&lt;p&gt;Once Corosync is running, you are able to start the Pacemaker cluster
resource manager on all cluster nodes:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;service pacemaker start
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Once cluster startup is completed, you should see output similar to
the following when invoking the &lt;code&gt;crm_mon&lt;/code&gt; utility:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;============
Last updated: Mon Dec  3 15:37:59 2012
Last change …&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Florian Haas</dc:creator><pubDate>Tue, 04 Dec 2012 10:53:27 +0100</pubDate><guid isPermaLink="false">tag:fghaas.github.io,2012-12-04:/resources/hints-and-kinks/mysqlgalera-pacemaker-starting-pacemaker/</guid><category>hints-and-kinks</category><category>Galera</category><category>MySQL</category><category>Pacemaker</category></item><item><title>Testing resource recovery</title><link>https://fghaas.github.io/resources/hints-and-kinks/mysqlgalera-pacemaker-testing-resource-recovery/</link><description>&lt;p&gt;If MySQL happens to die in your cluster, Pacemaker will automatically
recover the service in place. To test this, select any node on your
cluster and send the &lt;code&gt;mysqld&lt;/code&gt; process a &lt;code&gt;KILL&lt;/code&gt; signal:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;killall -KILL mysqld
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Then, monitor your cluster status with &lt;code&gt;crm_mon -rf&lt;/code&gt;. After a few
seconds, you should …&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Florian Haas</dc:creator><pubDate>Tue, 04 Dec 2012 10:53:27 +0100</pubDate><guid isPermaLink="false">tag:fghaas.github.io,2012-12-04:/resources/hints-and-kinks/mysqlgalera-pacemaker-testing-resource-recovery/</guid><category>hints-and-kinks</category><category>Galera</category><category>MySQL</category><category>Pacemaker</category></item><item><title>MySQL High Availability Deep Dive</title><link>https://fghaas.github.io/resources/presentations/mysql-high-availability-deep-dive/</link><description>&lt;p&gt;This is a tutorial that Yves Trudeau and I presented at the
Percona Live UK 2012 conference in London. It covers Pacemaker
integration with DRBD, MySQL Replication, and Galera.&lt;/p&gt;
&lt;!--break--&gt;
&lt;ul&gt;
&lt;li&gt;Slides: &lt;a href="https://docs.google.com/presentation/d/12CzmvBOUpbIOrS2CGbG4PU6v74g99C0gGlh0Zf0Qh7g/embed"&gt;Google Slides&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;hr/&gt;
&lt;p&gt;This article originally appeared on the &lt;code&gt;hastexo.com&lt;/code&gt; website (now defunct).&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Florian Haas</dc:creator><pubDate>Mon, 03 Dec 2012 13:50:00 +0000</pubDate><guid isPermaLink="false">tag:fghaas.github.io,2012-12-03:/resources/presentations/mysql-high-availability-deep-dive/</guid><category>presentations</category><category>Conference</category><category>MySQL</category><category>Pacemaker</category><category>Galera</category></item></channel></rss>